<view class="profile-container" wx:if="{{userInfo}}">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-avatar">
      <t-avatar size="large" image="{{userInfo.avatar || '/assets/icons/profile.png'}}" />
    </view>
    <view class="user-info">
      <view class="user-name">{{userInfo.nickname}}</view>
      <view class="user-phone">{{userInfo.phone}}</view>
      <view class="user-role" wx:if="{{userInfo.companyName}}">
        {{userInfo.companyName}} - {{roleText}}
      </view>
    </view>
  </view>

  <!-- å…¬å¸ä¿¡æ¯ -->
  <view class="section" wx:if="{{userInfo.companyId}}">
    <view class="section-title">å…¬å¸ä¿¡æ¯</view>
    <t-cell-group>
      <t-cell title="å…¬å¸åç§°" note="{{companyInfo.name}}" />
      <t-cell title="æˆå‘˜æ•°é‡" note="{{companyInfo.memberCount}}äºº" />
      <t-cell title="æˆ‘çš„è§’è‰²" note="{{roleText}}" />
      <t-cell 
        title="ç®¡ç†å…¬å¸" 
        arrow 
        bind:click="goToCompanyManage"
        wx:if="{{userInfo.role === 'admin'}}"
      />
    </t-cell-group>
  </view>

  <!-- å…¬å¸æ“ä½œ -->
  <view class="section" wx:if="{{!userInfo.companyId}}">
    <view class="section-title">å…¬å¸ç®¡ç†</view>
    <t-cell-group>
      <t-cell title="åˆ›å»ºå…¬å¸" arrow bind:click="goToCreateCompany" />
      <t-cell title="ç”³è¯·åŠ å…¥å…¬å¸" arrow bind:click="goToApplyCompany" />
    </t-cell-group>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="section">
    <view class="section-title">åŠŸèƒ½èœå•</view>
    <t-cell-group>
      <t-cell title="å†å²è®°å½•" arrow bind:click="goToHistory" />
      <t-cell title="æ•°æ®æŠ¥å‘Š" arrow bind:click="goToReport" />
      <t-cell title="è®¾ç½®" arrow bind:click="goToSettings" />
    </t-cell-group>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view class="logout-section">
    <t-button theme="danger" size="large" block bind:tap="handleLogout">
      é€€å‡ºç™»å½•
    </t-button>
  </view>
</view>

<!-- æœªç™»å½•çŠ¶æ€ -->
<view class="login-prompt" wx:else>
  <view class="prompt-content">
    <view class="prompt-icon">ğŸ‘¤</view>
    <view class="prompt-text">è¯·å…ˆç™»å½•</view>
    <t-button theme="primary" bind:tap="goToLogin">ç«‹å³ç™»å½•</t-button>
  </view>
</view> 