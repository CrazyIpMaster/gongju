<view class="manage-container">
  <view class="header">
    <view class="company-info">
      <view class="company-name">{{companyInfo.name}}</view>
      <view class="company-desc" wx:if="{{companyInfo.description}}">{{companyInfo.description}}</view>
      <view class="company-stats">
        <text class="stat-item">æˆå‘˜ï¼š{{companyInfo.memberCount}}äºº</text>
        <text class="stat-item">åˆ›å»ºæ—¶é—´ï¼š{{createTimeText}}</text>
      </view>
    </view>
  </view>

  <!-- å¾…å¤„ç†ç”³è¯· -->
  <view class="section" wx:if="{{pendingApplications.length > 0}}">
    <view class="section-title">
      <text>å¾…å¤„ç†ç”³è¯·</text>
      <t-tag theme="warning" size="small">{{pendingApplications.length}}</t-tag>
    </view>
    <view 
      class="application-item" 
      wx:for="{{pendingApplications}}" 
      wx:key="id"
    >
      <view class="applicant-info">
        <view class="applicant-name">{{item.userNickname}}</view>
        <view class="applicant-phone">{{item.userPhone}}</view>
        <view class="apply-time">ç”³è¯·æ—¶é—´ï¼š{{item.applyTimeText}}</view>
      </view>
      <view class="application-actions">
        <t-button 
          size="small" 
          theme="success" 
          bind:tap="handleApplication"
          data-id="{{item.id}}"
          data-action="approve"
        >
          é€šè¿‡
        </t-button>
        <t-button 
          size="small" 
          theme="danger" 
          bind:tap="handleApplication"
          data-id="{{item.id}}"
          data-action="reject"
        >
          æ‹’ç»
        </t-button>
      </view>
    </view>
  </view>

  <!-- æ— å¾…å¤„ç†ç”³è¯· -->
  <view class="empty-applications" wx:else>
    <view class="empty-icon">ğŸ“‹</view>
    <view class="empty-text">æš‚æ— å¾…å¤„ç†ç”³è¯·</view>
  </view>

  <!-- ç®¡ç†åŠŸèƒ½ -->
  <view class="section">
    <view class="section-title">ç®¡ç†åŠŸèƒ½</view>
    <t-cell-group>
      <t-cell title="å…¬å¸æˆå‘˜" note="{{companyInfo.memberCount}}äºº" arrow bind:click="viewMembers" />
      <t-cell title="ç”³è¯·è®°å½•" arrow bind:click="viewApplicationHistory" />
      <t-cell title="æ›´æ¢ç®¡ç†å‘˜" arrow bind:click="changeAdmin" />
    </t-cell-group>
  </view>

  <!-- æ›´æ¢ç®¡ç†å‘˜å¼¹çª— -->
  <t-dialog
    visible="{{showAdminDialog}}"
    title="æ›´æ¢ç®¡ç†å‘˜"
    content="è¯·è¾“å…¥æ–°ç®¡ç†å‘˜çš„æ‰‹æœºå·ç "
    confirm-btn="ç¡®è®¤æ›´æ¢"
    cancel-btn="å–æ¶ˆ"
    bind:confirm="confirmChangeAdmin"
    bind:cancel="cancelChangeAdmin"
  >
    <view slot="content">
      <view class="dialog-content">
        <view class="dialog-text">è¯·è¾“å…¥æ–°ç®¡ç†å‘˜çš„æ‰‹æœºå·ç ï¼š</view>
        <t-input
          value="{{newAdminPhone}}"
          placeholder="è¯·è¾“å…¥æ‰‹æœºå·"
          type="number"
          maxlength="11"
          bind:change="onNewAdminPhoneChange"
        />
        <view class="dialog-tips">
          <text>â€¢ æ–°ç®¡ç†å‘˜å¿…é¡»æ˜¯å…¬å¸æˆå‘˜</text>
          <text>â€¢ æ›´æ¢åæ‚¨å°†å¤±å»ç®¡ç†å‘˜æƒé™</text>
        </view>
      </view>
    </view>
  </t-dialog>
</view> 