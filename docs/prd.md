# 坪效计算工具 - 产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品简介
坪效计算工具是一款专为物业管理公司设计的微信小程序，主要用于计算和分析不同场地的坪效（每平方米收益）。通过系统化的数据录入、分析和报告功能，帮助物业管理者更好地评估场地运营效率，优化收支结构，提升管理决策的科学性。

### 1.2 产品目标
- **效率提升**：简化物业收支数据管理流程，提高数据录入和分析效率
- **决策支持**：通过数据可视化和智能分析，为管理决策提供科学依据
- **成本优化**：识别收支结构中的问题点，帮助优化运营成本
- **标准化管理**：建立统一的坪效计算标准，便于多场地对比分析

### 1.3 目标用户
- **主要用户**：物业管理公司的财务人员、运营经理
- **次要用户**：物业公司高层管理者、投资决策者
- **使用场景**：月度数据录入、季度分析报告、年度经营回顾

## 2. 功能需求

### 2.1 首页功能模块

#### 2.1.1 场地选择器
**功能描述**：用户可以选择当前要管理的场地，支持快速切换不同场地进行操作。

**具体需求**：
- 下拉选择器显示所有已配置的场地
- 显示当前选中场地的名称和基本信息
- 提供"管理"按钮，可直接跳转到场地管理页面
- 场地切换后，所有相关数据和统计自动更新

**交互要求**：
- 选择器支持搜索功能（场地较多时）
- 切换场地时有加载提示
- 保存用户最后选择的场地状态

#### 2.1.2 快速导航菜单
**功能描述**：4个主要功能模块的快速入口，采用网格布局展示。

**具体模块**：
1. **数据录入**：记录月度收支数据
2. **趋势分析**：查看图表报告和数据分析
3. **历史记录**：查看往期数据记录
4. **年度报告**：生成年度盈利分析报告

**设计要求**：
- 每个模块配有图标和简短描述
- 支持点击进入对应功能页面
- 图标设计风格统一，易于识别

#### 2.1.3 数据概览卡片
**功能描述**：展示当前场地本月的关键运营指标。

**显示指标**：
- **总收入**：当月所有收入项目合计
- **总支出**：当月所有支出项目合计
- **毛利率**：(总收入-总支出)/总收入 × 100%
- **坪效值**：毛利润/管理面积

**数据要求**：
- 数据实时更新，反映最新录入情况
- 支持点击查看详细数据
- 显示与上月对比的变化趋势

### 2.2 数据录入页面

#### 2.2.1 基础信息设置
**功能描述**：设置数据录入的基础参数。

**输入项目**：
- **月份选择**：选择要录入数据的月份（月份选择器）
- **管理面积**：当前场地的管理面积（平方米）
- **当前场地显示**：显示正在操作的场地，支持快速切换

**验证规则**：
- 月份不能选择未来时间
- 管理面积必须大于0
- 同一场地同一月份不能重复录入（应提示覆盖或编辑）

#### 2.2.2 收入明细录入
**功能描述**：分类录入各项收入数据。

**收入分类**：
- **物业管理费**：基础物业服务费收入
- **停车费收入**：停车场相关收入
- **其他收入**：维修服务费、广告费等其他收入来源

**功能要求**：
- 支持数字输入，自动格式化显示
- 实时计算收入总额
- 支持添加自定义收入类别
- 输入框支持千分位分隔符显示

#### 2.2.3 支出明细录入
**功能描述**：分类录入各项支出数据。

**支出分类**：
- **人工成本**：员工工资、社保等人力成本
- **维护费用**：设备维护、清洁用品等运营支出
- **其他支出**：水电费、税费等其他必要支出

**功能要求**：
- 支持数字输入，自动格式化显示
- 实时计算支出总额
- 支持添加自定义支出类别
- 输入验证，防止负数输入

#### 2.2.4 实时计算结果
**功能描述**：根据录入数据实时计算关键指标。

**计算项目**：
- **毛利润**：总收入 - 总支出
- **毛利率**：毛利润 / 总收入 × 100%
- **坪效值**：毛利润 / 管理面积

**显示要求**：
- 数据实时更新，无需手动刷新
- 突出显示关键指标
- 提供计算公式说明（可选显示）

#### 2.2.5 数据保存功能
**功能描述**：保存录入的数据到数据库。

**保存要求**：
- 数据验证通过后才能保存
- 保存前显示数据确认弹窗
- 支持保存为草稿（未完成录入）
- 保存成功后显示确认提示

### 2.3 趋势分析页面

#### 2.3.1 场地选择和对比设置
**功能描述**：选择要分析的场地，支持单场地分析和多场地对比。

**功能组件**：
- **当前场地显示**：显示正在分析的场地
- **场地切换按钮**：快速切换到其他场地
- **对比分析开关**：启用多场地对比功能
- **对比场地选择**：选择要对比的其他场地

#### 2.3.2 趋势图表展示
**功能描述**：通过图表形式展示数据趋势和分析结果。

**图表类型**：
1. **月度收支趋势图**：
   - 折线图显示收入、支出随时间的变化
   - 支持最近6个月或12个月时间范围选择
   - 显示环比增长率

2. **毛利率变化图**：
   - 折线图显示毛利率的月度变化
   - 标注行业平均水平参考线
   - 显示趋势分析结论

3. **坪效对比图**（对比模式）：
   - 柱状图对比不同场地的坪效表现
   - 支持按月度或季度对比
   - 突出显示表现最佳的场地

**交互功能**：
- 图表支持缩放和拖拽查看
- 点击数据点显示详细数值
- 支持导出图表为图片

#### 2.3.3 智能分析建议
**功能描述**：基于数据分析结果，提供智能化的管理建议。

**分析维度**：
- **收入分析**：识别收入增长点和下降原因
- **成本分析**：发现成本控制的优化空间
- **效率分析**：评估场地运营效率和改进方向
- **对比分析**：与同类场地或历史数据的比较

**建议类型**：
- 成本优化建议
- 收入提升建议
- 运营效率改进建议
- 风险预警提示

### 2.4 场地管理页面

#### 2.4.1 添加新场地
**功能描述**：支持添加新的管理场地信息。

**输入项目**：
- **场地名称**：必填，场地的标识名称
- **管理面积**：必填，以平方米为单位
- **场地类型**：下拉选择（办公楼、商业中心、住宅小区、综合体）
- **场地地址**：选填，场地的详细地址
- **备注信息**：选填，其他相关信息

**验证规则**：
- 场地名称不能重复
- 管理面积必须为正数
- 必填项目不能为空

#### 2.4.2 现有场地管理
**功能描述**：展示和管理已添加的场地信息。

**展示内容**：
- 场地列表，显示基本信息
- 当前选中场地特殊标识
- 每个场地的操作按钮（编辑、删除、切换）

**操作功能**：
- **编辑**：修改场地基本信息
- **删除**：删除场地（需确认，有数据的场地需特殊处理）
- **切换**：将当前操作场地切换到选中场地
- **设为默认**：设置默认选中的场地

#### 2.4.3 场地信息校验
**功能描述**：确保场地信息的准确性和完整性。

**校验规则**：
- 场地名称唯一性检查
- 面积数据合理性验证
- 删除操作的数据依赖检查
- 场地类型的标准化管理

### 2.5 历史记录页面

#### 2.5.1 数据筛选功能
**功能描述**：支持多维度筛选历史数据记录。

**筛选条件**：
- **场地筛选**：全部场地或指定场地
- **时间筛选**：按年份、季度或自定义时间范围
- **数据类型**：收入、支出、利润等特定数据
- **排序方式**：按时间、坪效、毛利率等排序

**交互要求**：
- 筛选条件实时生效
- 支持多条件组合筛选
- 保存用户常用的筛选设置

#### 2.5.2 历史记录展示
**功能描述**：列表形式展示符合筛选条件的历史记录。

**显示信息**：
- 记录时间（年月）
- 场地名称
- 主要财务指标（收入、支出、毛利率、坪效）
- 与上期对比的变化情况

**交互功能**：
- 点击记录查看详细数据
- 支持批量选择和对比
- 长按显示更多操作选项

#### 2.5.3 数据对比功能
**功能描述**：支持选择多个历史记录进行对比分析。

**对比功能**：
- 同场地不同时期对比
- 不同场地同时期对比
- 关键指标变化趋势对比
- 成本结构变化对比

### 2.6 年度报告页面

#### 2.6.1 报告配置
**功能描述**：设置年度报告的生成参数。

**配置选项**：
- **报告年份**：选择要生成报告的年份
- **报告类型**：
  - 单场地报告：针对特定场地的详细分析
  - 全场地汇总：所有场地的整体分析
  - 场地对比：多个场地的对比分析
- **报告格式**：页面显示或导出PDF

#### 2.6.2 年度数据汇总
**功能描述**：展示选定年份的关键数据汇总。

**汇总指标**：
- **年度总收入**：全年收入汇总
- **年度总支出**：全年支出汇总
- **平均毛利率**：全年平均毛利率
- **平均坪效**：全年平均坪效值
- **最佳月份**：表现最好的月份分析
- **改进空间**：有待提升的方面

#### 2.6.3 年度趋势分析
**功能描述**：展示年度数据的变化趋势和分析结论。

**分析内容**：
- 月度趋势变化图表
- 季度对比分析
- 同比增长分析
- 行业对标分析（如有数据）

#### 2.6.4 报告导出功能
**功能描述**：支持将年度报告导出为PDF或图片格式。

**导出选项**：
- PDF格式报告（包含完整图表和数据）
- 图片格式摘要（用于分享）
- 数据表格导出（Excel格式）

## 3. 非功能性需求

### 3.1 性能要求
- **响应时间**：页面加载时间不超过3秒
- **数据处理**：支持单场地最多100个月的历史数据
- **并发用户**：支持最多50个用户同时使用
- **数据同步**：数据保存后1秒内在其他页面生效

### 3.2 安全要求
- **数据加密**：敏感财务数据传输和存储加密
- **访问控制**：基于微信用户身份的访问控制
- **数据备份**：每日自动备份数据
- **操作日志**：记录所有数据修改操作

### 3.3 兼容性要求
- **微信版本**：支持微信7.0以上版本
- **设备兼容**：支持iOS和Android设备
- **屏幕适配**：适配不同尺寸的手机屏幕
- **网络环境**：支持4G/5G/WiFi网络环境

### 3.4 易用性要求
- **操作简便**：关键操作不超过3步完成
- **界面友好**：采用直观的图标和颜色设计
- **错误提示**：提供清晰的错误信息和解决建议
- **帮助文档**：提供操作指南和常见问题解答

## 4. 技术架构建议

### 4.1 前端技术
- **框架**：微信小程序原生框架
- **UI组件**：WeUI或自定义组件库
- **图表库**：ECharts for 微信小程序
- **状态管理**：全局数据管理方案

### 4.2 后端技术
- **服务器**：Node.js + Express 或类似框架
- **数据库**：MySQL或MongoDB
- **云服务**：微信云开发或阿里云/腾讯云
- **API设计**：RESTful API设计规范

### 4.3 数据存储设计
- **用户表**：存储用户基本信息
- **场地表**：存储场地基本信息
- **财务数据表**：存储月度收支数据
- **系统配置表**：存储应用配置信息

## 5. 开发计划

### 5.1 开发阶段
**第一阶段（2周）**：
- 基础框架搭建
- 用户登录和场地管理功能
- 数据录入基础功能

**第二阶段（2周）**：
- 数据录入完整功能
- 历史记录查看功能
- 基础图表展示

**第三阶段（2周）**：
- 趋势分析功能
- 年度报告功能
- 数据导出功能

**第四阶段（1周）**：
- 功能测试和优化
- 性能调优
- 用户体验完善

### 5.2 测试计划
- **单元测试**：核心计算逻辑测试
- **集成测试**：前后端接口测试
- **用户测试**：真实用户场景测试
- **性能测试**：并发和数据量测试

## 6. 风险评估

### 6.1 技术风险
- **数据准确性**：财务计算的准确性要求较高
- **性能优化**：大量历史数据的处理性能
- **兼容性问题**：不同设备和微信版本的兼容

### 6.2 业务风险
- **用户接受度**：用户对新工具的接受和使用习惯
- **数据安全**：财务数据的安全性要求
- **功能完整性**：是否满足用户的实际业务需求

### 6.3 解决方案
- 建立完善的测试体系确保数据准确性
- 采用分页和缓存技术优化性能
- 进行充分的兼容性测试
- 与目标用户深度沟通，确保功能贴合实际需求
