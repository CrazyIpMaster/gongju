# 坪效工具用户系统使用指南

## 功能概述

坪效计算工具现已支持多用户协同功能，包括用户注册登录、公司创建管理、团队协作等功能。

## 主要功能

### 1. 用户注册与登录

#### 注册新账号
1. 打开小程序，点击"立即注册"
2. 输入手机号、昵称、密码（至少6位）
3. 确认密码后点击"注册"
4. 注册成功后自动跳转到登录页面

#### 登录账号
1. 在登录页面输入手机号和密码
2. 点击"登录"按钮
3. 登录成功后进入首页

### 2. 公司管理

#### 创建公司
1. 登录后进入"个人中心"页面
2. 点击"创建公司"
3. 输入公司名称和描述（可选）
4. 点击"创建公司"
5. 创建成功后，您将成为该公司的管理员

#### 申请加入公司
1. 在个人中心点击"申请加入公司"
2. 搜索或浏览可申请的公司列表
3. 点击要加入的公司，确认申请
4. 等待公司管理员审核

### 3. 管理员功能

#### 审核员工申请
1. 管理员在个人中心点击"管理公司"
2. 查看"待处理申请"列表
3. 对每个申请选择"通过"或"拒绝"
4. 通过的员工将自动加入公司

#### 更换管理员
1. 在公司管理页面点击"更换管理员"
2. 输入新管理员的手机号码
3. 确认更换（新管理员必须是公司成员）
4. 更换成功后，您将失去管理员权限

### 4. 团队协作

#### 数据共享
- 同一公司的成员可以共享坪效数据
- 所有成员都可以查看公司的历史记录和报告
- 数据录入和分析结果在团队内同步

#### 权限管理
- **管理员**：可以审核申请、管理成员、更换管理员
- **成员**：可以录入数据、查看报告、参与协作
- **待审核**：申请已提交，等待管理员处理

## 使用流程

### 新用户流程
1. 注册账号 → 登录
2. 选择创建公司或申请加入公司
3. 开始使用坪效计算功能

### 公司管理员流程
1. 创建公司
2. 等待员工申请加入
3. 审核员工申请
4. 管理团队协作

### 普通员工流程
1. 申请加入公司
2. 等待管理员审核
3. 审核通过后开始协作

## 数据存储

### 本地存储
- 用户信息存储在本地缓存中
- 公司信息和申请记录同样本地存储
- 数据在设备间不同步（未来可扩展云端同步）

### 数据安全
- 密码采用明文存储（演示版本，生产环境需加密）
- 用户数据仅在本设备可见
- 建议定期备份重要数据

## 注意事项

### 账号管理
- 手机号作为唯一标识，不可重复注册
- 忘记密码需要重新注册（演示版本限制）
- 一个用户只能加入一个公司

### 公司管理
- 公司名称不可重复
- 管理员更换后无法撤销
- 公司创建后无法删除（演示版本限制）

### 权限限制
- 只有管理员可以审核申请
- 成员无法直接退出公司
- 管理员权限转移后立即生效

## 常见问题

### Q: 忘记密码怎么办？
A: 当前版本需要重新注册账号。

### Q: 如何退出公司？
A: 当前版本不支持主动退出，请联系管理员。

### Q: 可以加入多个公司吗？
A: 不可以，一个用户只能加入一个公司。

### Q: 公司数据会丢失吗？
A: 数据存储在本地，卸载应用或清除缓存会导致数据丢失。

### Q: 如何备份数据？
A: 当前版本不支持数据导出，建议截图保存重要信息。

## 技术说明

### 存储机制
- 使用微信小程序的本地存储API
- 数据格式为JSON字符串
- 存储键名有固定前缀避免冲突

### 权限验证
- 基于用户角色的权限控制
- 页面级别的访问控制
- 操作级别的权限验证

### 数据结构
```typescript
// 用户信息
interface UserInfo {
  id: string;
  phone: string;
  nickname: string;
  companyId?: string;
  role: 'admin' | 'member' | 'pending';
}

// 公司信息
interface Company {
  id: string;
  name: string;
  adminPhone: string;
  memberCount: number;
}

// 申请记录
interface CompanyApplication {
  id: string;
  userId: string;
  companyId: string;
  status: 'pending' | 'approved' | 'rejected';
}
```

## 更新日志

### v1.0.0 (当前版本)
- ✅ 用户注册登录功能
- ✅ 公司创建和管理
- ✅ 员工申请和审核
- ✅ 管理员权限转移
- ✅ 基础团队协作

### 计划功能
- 🔄 云端数据同步
- 🔄 密码找回功能
- 🔄 公司成员管理
- 🔄 数据导出功能
- 🔄 消息通知系统

---

如有问题或建议，请联系开发团队。 